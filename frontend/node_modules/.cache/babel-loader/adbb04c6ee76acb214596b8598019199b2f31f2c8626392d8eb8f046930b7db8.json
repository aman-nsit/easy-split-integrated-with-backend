{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Aman/Desktop/split-expense/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Aman/Desktop/split-expense/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Aman/Desktop/split-expense/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Aman/Desktop/split-expense/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{create}from\"zustand\";import axios from\"axios\";import{Navigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";var authStore=create(function(set){return{loggedIn:null,loginForm:{email:\"\",password:\"\"},updateLoginForm:function updateLoginForm(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;set(function(state){return{loginForm:_objectSpread(_objectSpread({},state.loginForm),{},_defineProperty({},name,value))};});},login:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _authStore$getState,loginForm,item,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;// console.log(loginForm);\n_authStore$getState=authStore.getState(),loginForm=_authStore$getState.loginForm;item=localStorage.getItem('accesstoken');// console.log(item)\n_context.next=5;return axios.post(\"/users/login\",loginForm);case 5:res=_context.sent;// console.log(res); \n// localStorage.setItem(res.data)\n// console.log(res.data.accesstoken);\nlocalStorage.setItem(\"accesstoken\",res.data.accesstoken);set({loggedIn:true,loginForm:{email:\"\",password:\"\"}});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));function login(){return _login.apply(this,arguments);}return login;}(),checkAuth:function(){var _checkAuth=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/users/check-auth\");case 3:set({loggedIn:true});_context2.next=11;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);set({loggedIn:false});console.log(_context2.t0);return _context2.abrupt(\"return\",/*#__PURE__*/_jsx(Navigate,{to:\"/users/login\"}));case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));function checkAuth(){return _checkAuth.apply(this,arguments);}return checkAuth;}(),signUpForm:{name:\"\",user_name:\"\",email:\"\",password:\"\"},updateSignUpForm:function updateSignUpForm(e){var _e$target2=e.target,name=_e$target2.name,value=_e$target2.value;set(function(state){return{signUpForm:_objectSpread(_objectSpread({},state.signUpForm),{},_defineProperty({},name,value))};});},signUp:function(){var _signUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var _authStore$getState2,signUpForm,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_authStore$getState2=authStore.getState(),signUpForm=_authStore$getState2.signUpForm;console.log(signUpForm);_context3.next=5;return axios.post(\"/users/signup\",signUpForm,{withCredentials:true});case 5:res=_context3.sent;set({signUpForm:{user_name:\"\",email:\"\",password:\"\"}});console.log(res);_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 13:case\"end\":return _context3.stop();}},_callee3,null,[[0,10]]);}));function signUp(){return _signUp.apply(this,arguments);}return signUp;}(),logOut:function(){var _logOut=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:try{// const res = await axios.get(\"/users/logout\");\nlocalStorage.clear();set({loggedIn:false});console.log(\"logged_out\");}catch(err){console.log(err);}case 1:case\"end\":return _context4.stop();}},_callee4);}));function logOut(){return _logOut.apply(this,arguments);}return logOut;}()};});export default authStore;","map":{"version":3,"names":["React","create","axios","Navigate","jsx","_jsx","authStore","set","loggedIn","loginForm","email","password","updateLoginForm","e","_e$target","target","name","value","state","_objectSpread","_defineProperty","login","_login","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_authStore$getState","item","res","wrap","_callee$","_context","prev","next","getState","localStorage","getItem","post","sent","setItem","data","accesstoken","t0","console","log","stop","apply","arguments","checkAuth","_checkAuth","_callee2","_callee2$","_context2","get","abrupt","to","signUpForm","user_name","updateSignUpForm","_e$target2","signUp","_signUp","_callee3","_authStore$getState2","_callee3$","_context3","withCredentials","logOut","_logOut","_callee4","_callee4$","_context4","clear","err"],"sources":["C:/Users/Aman/Desktop/split-expense/frontend/src/components/AuthStore.js"],"sourcesContent":["import React from 'react';\r\nimport {create} from \"zustand\" ;\r\nimport  axios from \"axios\";\r\nimport { Navigate } from 'react-router-dom';\r\nconst authStore = create((set) => ({\r\n    loggedIn : null ,\r\n\r\n    loginForm:{\r\n        email:\"\",\r\n        password : \"\",\r\n    },\r\n    updateLoginForm :(e) => {\r\n        const {name , value} = e.target ;\r\n        set((state) => {\r\n            return{\r\n                loginForm:{\r\n                    ...state.loginForm,\r\n                    [name] : value\r\n                },\r\n            };\r\n        });\r\n    },\r\n    login : async () =>{\r\n        try{\r\n            // console.log(loginForm);\r\n            const {loginForm} = authStore.getState();\r\n            const item =localStorage.getItem('accesstoken');\r\n            // console.log(item)\r\n            const res = await axios.post(\"/users/login\",loginForm) \r\n            // console.log(res); \r\n            // localStorage.setItem(res.data)\r\n            // console.log(res.data.accesstoken);\r\n            localStorage.setItem(\"accesstoken\",res.data.accesstoken)\r\n            set(\r\n                {loggedIn:true ,    \r\n                loginForm : {\r\n                    email : \"\",\r\n                    password : \"\"\r\n                }\r\n            });\r\n            \r\n        }catch(err){\r\n            console .log(err);\r\n        }\r\n    } , \r\n    checkAuth : async () =>{\r\n        try{\r\n            // await axios.get(\"/check-auth\", {withCredentials: true}); // not rquire set default in index.js\r\n            // await axios.get(\"/check-auth\");\r\n            // set({loggedIn : true});\r\n            await axios.get(\"/users/check-auth\");\r\n\r\n            set({loggedIn : true});\r\n        }catch(err){\r\n            set({loggedIn : false});\r\n            console.log(err);\r\n            return (\r\n                <Navigate to=\"/users/login\" />\r\n            )\r\n        }\r\n        \r\n    } ,\r\n\r\n    signUpForm:{\r\n        name:\"\",\r\n        user_name:\"\",\r\n        email:\"\",\r\n        password : \"\",\r\n    },\r\n    updateSignUpForm :(e) => {\r\n        const {name , value} = e.target ;\r\n        set((state) => {\r\n            return{\r\n                signUpForm:{\r\n                    ...state.signUpForm,\r\n                    [name] : value\r\n                },\r\n            };\r\n        });\r\n    },\r\n    signUp : async () => {\r\n        try{\r\n            const {signUpForm} = authStore.getState();\r\n            console.log(signUpForm);\r\n            const res = await axios.post(\"/users/signup\",signUpForm,{\r\n                withCredentials: true\r\n            })  \r\n            set({\r\n                signUpForm : {\r\n                    user_name:\"\",\r\n                    email : \"\",\r\n                    password : \"\"\r\n                }\r\n            });\r\n            console.log(res);\r\n        }catch(err){\r\n            console.log(err);\r\n        }\r\n    } ,\r\n    logOut : async () =>{\r\n        try{\r\n            // const res = await axios.get(\"/users/logout\");\r\n                localStorage.clear();\r\n                set({loggedIn : false});\r\n                console.log(\"logged_out\");\r\n        }catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n}));\r\nexport default authStore;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}